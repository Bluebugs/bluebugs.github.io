<style>
    #spmd-demo_oddeven {
        /* ID Suffix Added */
        display: flex;
        flex-direction: column;
        font-family: sans-serif;
        border: 1px solid #ccc;
        padding: 10px;
        max-width: 900px;
        margin: 20px auto;
        background-color: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    #spmd-code-pane_oddeven {
        /* ID Suffix Added */
        flex: 1;
        padding: 15px;
        background-color: #fff;
        border-right: 1px solid #eee; /* Kept due to #eee vs #e0e0e0 and specific border-radius */
        border-radius: 4px 0 0 4px;
    }

    #spmd-info-pane_oddeven {
        /* ID Suffix Added */
        padding: 10px; /* Differs from .spmd-info-pane */
        font-size: 0.9em; /* Differs */
        color: #333;
        text-align: left;
        width: 100%;
        background-color: #fff; /* Differs */
        border: 1px solid #eee; /* Differs */
        border-radius: 4px; /* Differs */
    }

    #spmd-viz-pane_oddeven {
        /* ID Suffix Added */
        flex: 1.5;
        padding: 15px;
        display: flex;
        flex-direction: column;
        align-items: center; /* Differs from .spmd-viz-pane justify-content */
    }

    #spmd-lane-data-grid_oddeven {
        /* ID Suffix Added */
        display: grid;
        grid-template-columns: auto repeat(4, 1fr);
        gap: 5px 8px; /* Differs from .spmd-lane-data-grid */
        width: 100%;
        margin-bottom: 20px; /* Differs */
        align-items: center;
    }

    #spmd-lane-data-grid_oddeven .spmd-grid-cell[id*='-v'] {
        /* Parent ID Suffix Reflected */
        color: #28a745;
        font-weight: bold;
    }

    #spmd-lane-data-grid_oddeven .spmd-grid-cell[id*='-odd'],
    #spmd-lane-data-grid_oddeven .spmd-grid-cell[id*='-even'] {
        color: #007bff;
        font-weight: bold;
    }

    #spmd-lane-data-grid_oddeven .spmd-grid-cell.inactive-lane {
        background-color: #e9ecef;
        color: #adb5bd;
        font-style: italic;
    }

    #spmd-controls_oddeven {
        margin-top: 20px;
        text-align: center;
    }

    /* General Go Syntax Highlighting Styles (scoped to the demo) - REMOVED */
    /* All #spmd-demo_oddeven .gokw, .gofn, etc. rules are removed */
    /* REMOVED: #spmd-info-pane_oddeven .spmd-inline-code */
</style>

<div id="spmd-demo_oddeven"> <!-- ID Suffix Added -->
    <div id="spmd-main-content_oddeven" class="spmd-demo"> <!-- ID Suffix Added, CLASS ADDED -->
        <div id="spmd-code-pane_oddeven" class="spmd-code-pane spmd-code-pane-oddeven"> <!-- ID Suffix Added -->
            <pre><code id="spmd-go-code_oddeven"> <!-- ID Suffix Added -->
<span class="code-line" data-line="1"><span class="gokw">func</span> <span class="gofn">oddEvenCount</span><span class="gopunct">(</span><span class="govar">a</span> <span class="goty">[]int</span><span class="gopunct">)</span> <span class="gopunct">(</span><span class="goty">int</span><span class="gopunct">,</span> <span class="goty">int</span><span class="gopunct">)</span> <span class="gopunct">{</span></span>
<span class="code-line" data-line="2">  <span class="gokw">var</span> <span class="govar">odd</span> <span class="gohypo">varying</span> <span class="goty">int</span></span>
<span class="code-line" data-line="3">  <span class="gokw">var</span> <span class="govar">even</span> <span class="gohypo">varying</span> <span class="goty">int</span></span>
<span class="code-line" data-line="4">  <span class="gokw">go</span> <span class="gokw">for</span> <span class="govar">_</span><span class="gopunct">,</span> <span class="govar">v</span> <span class="goop">:=</span> <span class="gokw">range</span> <span class="govar">a</span> <span class="gopunct">{</span></span>
<span class="code-line" data-line="5">    <span class="gokw">if</span> <span class="govar">v</span><span class="goop">&amp;</span><span class="gonum">1</span> <span class="goop">==</span> <span class="gonum">1</span> <span class="gopunct">{</span> <span class="gocomment">// Check if odd</span></span>
<span class="code-line" data-line="6">        <span class="govar">odd</span><span class="goop">++</span></span>
<span class="code-line" data-line="7">    <span class="gopunct">}</span> <span class="gokw">else</span> <span class="gopunct">{</span>      <span class="gocomment">// Else it's even</span></span>
<span class="code-line" data-line="8">        <span class="govar">even</span><span class="goop">++</span></span>
<span class="code-line" data-line="9">    <span class="gopunct">}</span></span>
<span class="code-line" data-line="10">  <span class="gopunct">}</span></span>
<span class="code-line" data-line="11">  <span class="gokw">return</span> <span class="gofn">reduce.Add</span><span class="gopunct">(</span><span class="govar">odd</span><span class="gopunct">),</span> <span class="gofn">reduce.Add</span><span class="gopunct">(</span><span class="govar">even</span><span class="gopunct">)</span></span>
<span class="code-line" data-line="12"><span class="gopunct">}</span></span>
    </code></pre>
        </div>

        <div id="spmd-viz-pane_oddeven" class="spmd-viz-pane"> <!-- ID Suffix Added, CLASS ADDED -->
            <div id="spmd-lane-data-grid_oddeven"> <!-- ID Suffix Added -->
                <!-- Row 1: Lane Titles -->
                <div class="spmd-grid-label"></div>
                <div class="spmd-grid-header">Lane 1</div>
                <div class="spmd-grid-header">Lane 2</div>
                <div class="spmd-grid-header">Lane 3</div>
                <div class="spmd-grid-header">Lane 4</div>

                <!-- New Row for mask values -->
                <div class="spmd-grid-label">mask:</div>
                <div class="spmd-grid-cell" id="spmd-lane-1-mask_oddeven">-</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-2-mask_oddeven">-</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-3-mask_oddeven">-</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-4-mask_oddeven">-</div> <!-- ID Suffix Added -->

                <!-- Row 2: v values -->
                <div class="spmd-grid-label">v:</div>
                <div class="spmd-grid-cell" id="spmd-lane-0-v_oddeven">-</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-1-v_oddeven">-</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-2-v_oddeven">-</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-3-v_oddeven">-</div> <!-- ID Suffix Added -->

                <!-- Row 3: odd values -->
                <div class="spmd-grid-label">odd:</div>
                <div class="spmd-grid-cell" id="spmd-lane-0-odd_oddeven">0</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-1-odd_oddeven">0</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-2-odd_oddeven">0</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-3-odd_oddeven">0</div> <!-- ID Suffix Added -->

                <!-- Row 4: even values -->
                <div class="spmd-grid-label">even:</div>
                <div class="spmd-grid-cell" id="spmd-lane-0-even_oddeven">0</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-1-even_oddeven">0</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-2-even_oddeven">0</div> <!-- ID Suffix Added -->
                <div class="spmd-grid-cell" id="spmd-lane-3-even_oddeven">0</div> <!-- ID Suffix Added -->
            </div>

            <div id="spmd-final-result_oddeven"> <!-- ID Suffix Added -->
                <h4>Final Results</h4>
                <div class="result-lines-container">
                    <div class="result-line">
                        <span class="spmd-result-label">Total Odd:</span>
                        <span class="spmd-result-value-group">
                            <span id="spmd-odd-summation_oddeven" class="spmd-summation-text"></span>
                            <span class="spmd-equals-sign" id="spmd-odd-equals-sign_oddeven"
                                style="display: none;">=</span> <span
                                id="spmd-odd-final-value_oddeven" class="spmd-final-value-text">N/A</span>
                        </span>
                    </div>
                    <div class="result-line">
                        <span class="spmd-result-label">Total Even:</span>
                        <span class="spmd-result-value-group">
                            <span id="spmd-even-summation_oddeven" class="spmd-summation-text"></span>
                            <span class="spmd-equals-sign" id="spmd-even-equals-sign_oddeven"
                                style="display: none;">=</span> <span
                                id="spmd-even-final-value_oddeven" class="spmd-final-value-text">N/A</span>
                        </span>
                    </div>
                </div>
            </div>
            <div id="spmd-controls_oddeven" class="spmd-controls"> <!-- ID Suffix Added -->
                <button id="spmd-prev-step_oddeven">Previous</button> <!-- ID Suffix Added -->
                <button id="spmd-next-step_oddeven">Next</button> <!-- ID Suffix Added -->
            </div>
        </div>
    </div>

    <div id="spmd-info-pane_oddeven" class="spmd-info-pane"> <!-- ID Suffix Added, CLASS ADDED -->
        <h4>Execution Step:</h4>
        <p id="spmd-step-description_oddeven">Initializing...</p> <!-- ID Suffix Added -->
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const codeLines_oddeven = document.querySelectorAll('#spmd-go-code_oddeven .code-line'); /* ID Suffix Added */
        const stepDescription_oddeven = document.getElementById('spmd-step-description_oddeven'); /* ID Suffix Added */

        const laneMaskCells_oddeven = [
            document.getElementById('spmd-lane-1-mask_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-2-mask_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-3-mask_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-4-mask_oddeven')  /* ID Suffix Added */
        ];
        const laneVCells_oddeven = [
            document.getElementById('spmd-lane-0-v_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-1-v_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-2-v_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-3-v_oddeven')  /* ID Suffix Added */
        ];
        const laneOddCells_oddeven = [
            document.getElementById('spmd-lane-0-odd_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-1-odd_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-2-odd_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-lane-3-odd_oddeven')  /* ID Suffix Added */
        ];
        const laneEvenCells_oddeven = [
            document.getElementById('spmd-lane-0-even_oddeven'), 
            document.getElementById('spmd-lane-1-even_oddeven'), 
            document.getElementById('spmd-lane-2-even_oddeven'), 
            document.getElementById('spmd-lane-3-even_oddeven')  
        ];

        const oddSummationExprEl_oddeven = document.getElementById('spmd-odd-summation_oddeven'); 
        const oddFinalValueEl_oddeven = document.getElementById('spmd-odd-final-value_oddeven'); 
        const evenSummationExprEl_oddeven = document.getElementById('spmd-even-summation_oddeven'); 
        const evenFinalValueEl_oddeven = document.getElementById('spmd-even-final-value_oddeven'); 
        const equalsSigns_oddeven = [ // Collect both equals signs
            document.getElementById('spmd-odd-equals-sign_oddeven'), /* ID Suffix Added */
            document.getElementById('spmd-even-equals-sign_oddeven') /* ID Suffix Added */
        ];


        const prevButton_oddeven = document.getElementById('spmd-prev-step_oddeven'); /* ID Suffix Added */
        const nextButton_oddeven = document.getElementById('spmd-next-step_oddeven'); /* ID Suffix Added */

        const numLanes_oddeven = 4;
        const inputArray_oddeven = [1, 2, 3, 4, 5, 6, 7];

        const steps_oddeven = [
            { // 0: Initial Call
                line: null,
                description: `Calling <span class='spmd-inline-code'><span class='gofn'>oddEvenCount</span><span class='gopunct'>(</span><span class='goty'>[]int</span><span class='gopunct'{>{</span>${inputArray_oddeven.join(',')}<span class='gopunct'>}</span><span class='gopunct'>)</span></span>. Input <span class='spmd-inline-code'><span class='govar'>a</span></span> is initialized. Four execution lanes available.`,
                laneMaskDisplay: [true, true, true, true],
                laneVDisplay: ["-", "-", "-", "-"],
                laneOddDisplay: [0, 0, 0, 0],
                laneEvenDisplay: [0, 0, 0, 0],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 1: var odd
                line: 2,
                description: "<span class='spmd-inline-code'><span class='gokw'>var</span> <span class='govar'>odd</span> <span class='gohypo'>varying</span> <span class='goty'>int</span></span>: Each lane gets its own <span class='spmd-inline-code'><span class='govar'>odd</span></span> counter, initialized to 0.",
                laneMaskDisplay: [true, true, true, true],
                laneVDisplay: ["-", "-", "-", "-"],
                laneOddDisplay: [0, 0, 0, 0],
                laneEvenDisplay: [0, 0, 0, 0],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 2: var even
                line: 3,
                description: "<span class='spmd-inline-code'><span class='gokw'>var</span> <span class='govar'>even</span> <span class='gohypo'>varying</span> <span class='goty'>int</span></span>: Each lane gets its own <span class='spmd-inline-code'><span class='govar'>even</span></span> counter, initialized to 0.",
                laneMaskDisplay: [true, true, true, true],
                laneVDisplay: ["-", "-", "-", "-"],
                laneOddDisplay: [0, 0, 0, 0],
                laneEvenDisplay: [0, 0, 0, 0],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 3: go for - 1st batch
                line: 4,
                description: "<span class='spmd-inline-code'><span class='gokw'>go</span> <span class='gokw'>for</span> <span class='govar'>_</span><span class='gopunct'>,</span> <span class='govar'>v</span> <span class='goop'>:=</span> <span class='gokw'>range</span> <span class='govar'>a</span></span>: Distributing first batch. <span class='spmd-inline-code'><span class='govar'>v</span>=1</span> (L1), <span class='spmd-inline-code'><span class='govar'>v</span>=2</span> (L2), <span class='spmd-inline-code'><span class='govar'>v</span>=3</span> (L3), <span class='spmd-inline-code'><span class='govar'>v</span>=4</span> (L4).",
                laneMaskDisplay: [true, true, true, true],
                laneVDisplay: [1, 2, 3, 4],
                laneOddDisplay: [0, 0, 0, 0],
                laneEvenDisplay: [0, 0, 0, 0],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            // --- Start of 1st Batch If/Else Breakdown ---
            { // 4: if v&1 == 1 (Test for 1st batch)
                line: 5,
                description: "Evaluating <span class='spmd-inline-code'><span class='gokw'>if</span> <span class='govar'>v</span><span class='goop'>&amp;</span>1 <span class='goop'>==</span> 1</span>. L1 (<span class='spmd-inline-code'>1</span>) is odd (mask=true). L2 (<span class='spmd-inline-code'>2</span>) is even (mask=false). L3 (<span class='spmd-inline-code'>3</span>) is odd (mask=true). L4 (<span class='spmd-inline-code'>4</span>) is even (mask=false).",
                laneMaskDisplay: [true, false, true, false],
                laneVDisplay: [1, 2, 3, 4],
                laneOddDisplay: [0, 0, 0, 0],
                laneEvenDisplay: [0, 0, 0, 0],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 5: odd++ (1st batch)
                line: 6,
                description: "Executing <span class='spmd-inline-code'><span class='govar'>odd</span><span class='goop'>++</span></span> for lanes where condition was true. L1: <span class='spmd-inline-code'><span class='govar'>odd</span></span> becomes 1. L3: <span class='spmd-inline-code'><span class='govar'>odd</span></span> becomes 1.",
                laneMaskDisplay: [true, false, true, false],
                laneVDisplay: [1, 2, 3, 4],
                laneOddDisplay: [1, 0, 1, 0],
                laneEvenDisplay: [0, 0, 0, 0],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 6: else (Transition for 1st batch)
                line: 7,
                description: "Transition to <span class='spmd-inline-code'><span class='gokw'>else</span></span> block. L2 and L4 will execute <span class='spmd-inline-code'><span class='govar'>even</span><span class='goop'>++</span></span>.",
                laneMaskDisplay: [false, true, false, true],
                laneVDisplay: [1, 2, 3, 4],
                laneOddDisplay: [1, 0, 1, 0],
                laneEvenDisplay: [0, 0, 0, 0],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 7: even++ (1st batch)
                line: 8,
                description: "Executing <span class='spmd-inline-code'><span class='govar'>even</span><span class='goop'>++</span></span> for lanes in the <span class='spmd-inline-code'><span class='gokw'>else</span></span> block. L2: <span class='spmd-inline-code'><span class='govar'>even</span></span> becomes 1. L4: <span class='spmd-inline-code'><span class='govar'>even</span></span> becomes 1.",
                laneMaskDisplay: [false, true, false, true],
                laneVDisplay: [1, 2, 3, 4],
                laneOddDisplay: [1, 0, 1, 0],
                laneEvenDisplay: [0, 1, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 8: End if/else (1st batch)
                line: 9,
                description: "Finished <span class='spmd-inline-code'><span class='gokw'>if</span><span class='goop'>/</span><span class='gokw'>else</span></span> block for the first set of values. All lanes active for next iteration.",
                laneMaskDisplay: [true, true, true, true],
                laneVDisplay: [1, 2, 3, 4],
                laneOddDisplay: [1, 0, 1, 0],
                laneEvenDisplay: [0, 1, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            // --- End of 1st Batch If/Else Breakdown ---

            { // 9: go for - 2nd batch
                line: 4,
                description: "<span class='spmd-inline-code'><span class='gokw'>go</span> <span class='gokw'>for</span></span>: Distributing next batch. <span class='spmd-inline-code'><span class='govar'>v</span>=5</span> (L1), <span class='spmd-inline-code'><span class='govar'>v</span>=6</span> (L2), <span class='spmd-inline-code'><span class='govar'>v</span>=7</span> (L3). Lane 4 is idle for data processing in this batch.",
                laneMaskDisplay: [true, true, true, false],
                laneVDisplay: [5, 6, 7, "-"],
                laneOddDisplay: [1, 0, 1, 0],
                laneEvenDisplay: [0, 1, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            // --- Start of 2nd Batch If/Else Breakdown ---
            { // 10: if v&1 == 1 (Test for 2nd batch)
                line: 5,
                description: "Evaluating <span class='spmd-inline-code'><span class='gokw'>if</span> <span class='govar'>v</span><span class='goop'>&amp;</span>1 <span class='goop'>==</span> 1</span>. L1 (<span class='spmd-inline-code'>5</span>) is odd (mask=true). L2 (<span class='spmd-inline-code'>6</span>) is even (mask=false). L3 (<span class='spmd-inline-code'>7</span>) is odd (mask=true). Lane 4 is idle (mask=false).",
                laneMaskDisplay: [true, false, true, false],
                laneVDisplay: [5, 6, 7, "-"],
                laneOddDisplay: [1, 0, 1, 0],
                laneEvenDisplay: [0, 1, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 11: odd++ (2nd batch)
                line: 6,
                description: "Executing <span class='spmd-inline-code'><span class='govar'>odd</span><span class='goop'>++</span></span>. L1: <span class='spmd-inline-code'><span class='govar'>odd</span></span> becomes 2 (1+1). L3: <span class='spmd-inline-code'><span class='govar'>odd</span></span> becomes 2 (1+1). Lane 4 idle.",
                laneMaskDisplay: [true, false, true, false],
                laneVDisplay: [5, 6, 7, "-"],
                laneOddDisplay: [1 + 1, 0, 1 + 1, 0],
                laneEvenDisplay: [0, 1, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 12: else (Transition for 2nd batch)
                line: 7,
                description: "Transition to <span class='spmd-inline-code'><span class='gokw'>else</span></span> block. L2 will execute <span class='spmd-inline-code'><span class='govar'>even</span><span class='goop'>++</span></span>. Lane 4 idle.",
                laneMaskDisplay: [false, true, false, false],
                laneVDisplay: [5, 6, 7, "-"],
                laneOddDisplay: [2, 0, 2, 0],
                laneEvenDisplay: [0, 1, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 13: even++ (2nd batch)
                line: 8,
                description: "Executing <span class='spmd-inline-code'><span class='govar'>even</span><span class='goop'>++</span></span>. L2: <span class='spmd-inline-code'><span class='govar'>even</span></span> becomes 2 (1+1). Lane 4 idle.",
                laneMaskDisplay: [false, true, false, false],
                laneVDisplay: [5, 6, 7, "-"],
                laneOddDisplay: [2, 0, 2, 0],
                laneEvenDisplay: [0, 1 + 1, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 14: End if/else (2nd batch)
                line: 9,
                description: "Finished <span class='spmd-inline-code'><span class='gokw'>if</span><span class='goop'>/</span><span class='gokw'>else</span></span> block for the second set of values. Lane 4 was idle.",
                laneMaskDisplay: [true, true, true, false],
                laneVDisplay: [5, 6, 7, "-"],
                laneOddDisplay: [2, 0, 2, 0],
                laneEvenDisplay: [0, 2, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            // --- End of 2nd Batch If/Else Breakdown ---

            { // 15: Loop finished
                line: 10,
                description: "Loop finished. All elements from <span class='spmd-inline-code'><span class='govar'>a</span></span> have been processed.",
                laneMaskDisplay: [true, true, true, true],
                laneVDisplay: ["-", "-", "-", "-"],
                laneOddDisplay: [2, 0, 2, 0],
                laneEvenDisplay: [0, 2, 0, 1],
                finalResultOdd: "N/A",
                finalResultEven: "N/A"
            },
            { // 16: Return reduce.Add(odd), reduce.Add(even)
                line: 11,
                description: "<span class='spmd-inline-code'><span class='gokw'>return</span> <span class='gofn'>reduce.Add</span><span class='gopunct'>(</span><span class='govar'>odd</span><span class='gopunct'>),</span> <span class='gofn'>reduce.Add</span><span class='gopunct'>(</span><span class='govar'>even</span><span class='gopunct'>)</span></span>: Aggregating <span class='spmd-inline-code'><span class='govar'>odd</span></span> values (<span class='spmd-inline-code'>2+0+2+0</span>) and <span class='spmd-inline-code'><span class='govar'>even</span></span> values (<span class='spmd-inline-code'>0+2+0+1</span>) from all lanes.",
                laneMaskDisplay: [true, true, true, true],
                laneVDisplay: ["-", "-", "-", "-"],
                laneOddDisplay: [2, 0, 2, 0],
                laneEvenDisplay: [0, 2, 0, 1],
                finalResultOdd: 4,
                finalResultEven: 3
            },
            { // 17: Function returns
                line: 12,
                description: "Function returns total odd count: <span class='spmd-inline-code'>4</span>, total even count: <span class='spmd-inline-code'>3</span>.",
                laneMaskDisplay: [true, true, true, true],
                laneVDisplay: ["-", "-", "-", "-"],
                laneOddDisplay: [2, 0, 2, 0],
                laneEvenDisplay: [0, 2, 0, 1],
                finalResultOdd: 4,
                finalResultEven: 3
            }
        ];

        let currentStep_oddeven = 0;

        function renderStep_oddeven(stepIndex) {
            const step = steps_oddeven[stepIndex];

            codeLines_oddeven.forEach(line => line.classList.remove('highlight'));
            if (step.line !== null) {
                if (Array.isArray(step.line)) {
                    step.line.forEach(lineNumber => {
                        const lineToHighlight = document.querySelector(`#spmd-go-code_oddeven .code-line[data-line="${lineNumber}"]`);
                        if (lineToHighlight) lineToHighlight.classList.add('highlight');
                    });
                } else {
                    const lineToHighlight = document.querySelector(`#spmd-go-code_oddeven .code-line[data-line="${step.line}"]`);
                    if (lineToHighlight) lineToHighlight.classList.add('highlight');
                }
            }

            stepDescription_oddeven.innerHTML = step.description;

            for (let i = 0; i < numLanes_oddeven; i++) {
                const isActive = step.laneMaskDisplay[i];
                laneMaskCells_oddeven[i].textContent = isActive ? 'true' : 'false';

                [laneVCells_oddeven[i], laneOddCells_oddeven[i], laneEvenCells_oddeven[i]].forEach(cell => {
                    cell.classList.toggle('inactive-lane', !isActive);
                });

                laneVCells_oddeven[i].textContent = step.laneVDisplay[i];
                laneOddCells_oddeven[i].textContent = step.laneOddDisplay[i];
                laneEvenCells_oddeven[i].textContent = step.laneEvenDisplay[i];
            }

            const showFinal = step.finalResultOdd !== "N/A" && step.finalResultEven !== "N/A";
            equalsSigns_oddeven.forEach(el => { if (el) el.style.display = showFinal ? 'inline' : 'none' }); // Added null check for el

            if (showFinal) {
                if (oddSummationExprEl_oddeven) oddSummationExprEl_oddeven.textContent = step.laneOddDisplay.filter(v => typeof v === 'number' && !isNaN(v)).join(' + ');
                if (oddFinalValueEl_oddeven) oddFinalValueEl_oddeven.textContent = step.finalResultOdd;
                if (evenSummationExprEl_oddeven) evenSummationExprEl_oddeven.textContent = step.laneEvenDisplay.filter(v => typeof v === 'number' && !isNaN(v)).join(' + ');
                if (evenFinalValueEl_oddeven) evenFinalValueEl_oddeven.textContent = step.finalResultEven;
            } else {
                if (oddSummationExprEl_oddeven) oddSummationExprEl_oddeven.textContent = '';
                if (oddFinalValueEl_oddeven) oddFinalValueEl_oddeven.textContent = "N/A";
                if (evenSummationExprEl_oddeven) evenSummationExprEl_oddeven.textContent = '';
                if (evenFinalValueEl_oddeven) evenFinalValueEl_oddeven.textContent = "N/A";
            }

            if (prevButton_oddeven) prevButton_oddeven.disabled = stepIndex === 0;
            if (nextButton_oddeven) nextButton_oddeven.disabled = stepIndex === steps_oddeven.length - 1;
        }

        if (prevButton_oddeven) { // Added null check
            prevButton_oddeven.addEventListener('click', () => {
                if (currentStep_oddeven > 0) {
                    currentStep_oddeven--;
                    renderStep_oddeven(currentStep_oddeven);
                }
            });
        }

        if (nextButton_oddeven) { // Added null check
            nextButton_oddeven.addEventListener('click', () => {
                if (currentStep_oddeven < steps_oddeven.length - 1) {
                    currentStep_oddeven++;
                    renderStep_oddeven(currentStep_oddeven);
                }
            });
        }

        renderStep_oddeven(currentStep_oddeven); // Initial render
    });
</script>